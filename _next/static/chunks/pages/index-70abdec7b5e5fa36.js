(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(9909)}])},9909:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return M}});var t,i,o=s(5893),r=s(9008),a=s.n(r),c=s(7294),l=s(4409),h=s.n(l),d=s(5385);(t=i||(i={})).king="kingy.glb",t.marbleRun="marbleRun.glb";class u{constructor(e,n){e.addMeshTask("pm task","",n,i.king),e.addMeshTask("pm task","",n,i.marbleRun)}}class g{build(e){let n=e=>n=>n.id==e;((s,t)=>{let i=e.meshes.find(n(s));i?t(i):console.warn("unable to find mesh "+s)})("__root__",e=>{e.position.x=1.7})}constructor(){}}class p extends d.FreeCamera{constructor(e,n){super("Camera",new d.Vector3(2,2,8),e),this.setTarget(new d.Vector3(0,.4,0)),this.fovMode=p.FOVMODE_HORIZONTAL_FIXED,this.fov=.5,this.inertia=.4,this.attachControl(n,!0),this.minZ=.45,this.checkCollisions=!0,this.ellipsoid=new d.Vector3(1,1,1)}}class m{constructor(e){let n=new d.Mesh("marbleChar"),s=d.MeshBuilder.CreateSphere("marble",{diameter:2});s.parent=n,n.position.y=1,n.ellipsoid=new d.Vector3(1,1,1),n.ellipsoid.addInPlace(new d.Vector3(.25));let t=1-n.position.y;n.ellipsoidOffset=new d.Vector3(0,t,0);let i=n.ellipsoid.x,o=n.ellipsoid.y,r=[];for(let e=-Math.PI/2;e<Math.PI/2;e+=Math.PI/36)r.push(new d.Vector3(0,o*Math.sin(e)+t,i*Math.cos(e)));let a=[];a[0]=d.MeshBuilder.CreateLines("characterMoveBounds",{points:r},e),a[0].color=d.Color3.Red(),a[0].parent=n;let c=2*Math.PI/12;for(let e=1;e<12;e++)a[e]=a[0].clone("characterMoveBounds"+e),a[e].parent=n,a[e].rotation.y=e*c;let l=new d.Vector3(0,0,1),h=0,u=d.Matrix.Identity(),g=d.MeshBuilder.CreateLines("pointer",{points:[n.position.add(new d.Vector3(0,1,0)),n.position.add(new d.Vector3(0,1,0)).add(l.scale(3))],updatable:!0});e.onKeyboardObservable.add(e=>{if(e.type===d.KeyboardEventTypes.KEYDOWN)switch(e.event.key){case"a":case"A":h-=Math.PI/100,d.Matrix.RotationYToRef(h,u),d.Vector3.TransformNormalToRef(l,u,l),n.rotation.y=h;break;case"d":case"D":h+=Math.PI/100,d.Matrix.RotationYToRef(h,u),d.Vector3.TransformNormalToRef(l,u,l),n.rotation.y=h;break;case"w":case"W":n.moveWithCollisions(l.scale(.1));break;case"s":case"S":n.moveWithCollisions(l.scale(-.1))}g=d.MeshBuilder.CreateLines("pointer",{points:[n.position.add(new d.Vector3(0,1,0)),n.position.add(new d.Vector3(0,1,0)).add(l.scale(3))],instance:g})})}}s(2001);class f{loadAssets(){let e=new d.AssetsManager(this.scene);this.assetTasks=new u(e,this.assetBaseUrl),e.useDefaultLoadingScreen=!1,e.load(),e.onFinish=()=>{let e=new g;e.build(this.scene),this.handleGameLoadComplete()}}handleGameLoadComplete(){let e=d.MeshBuilder.CreateSphere("sphere",{diameter:2,segments:32},this.scene);e.position.y=1,e.position.x=3,e.checkCollisions=!0,new m(this.scene),this.engine.runRenderLoop(()=>this.scene.render()),this.scene.render()}constructor(e,n){this.engine=new d.Engine(e,!0,{preserveDrawingBuffer:!0,stencil:!0},!0),this.engine.setHardwareScalingLevel(1),this.assetBaseUrl=n,d.SceneLoader.ShowLoadingScreen=!0,this.scene=new d.Scene(this.engine),this.scene.debugLayer.show(),this.scene.createDefaultEnvironment({createGround:!0,createSkybox:!0,toneMappingEnabled:!0,skyboxColor:d.Color3.FromHexString("#590000"),skyboxSize:2e3,groundColor:d.Color3.FromHexString("#590000"),groundSize:200,enableGroundMirror:!0}),this.scene.imageProcessingConfiguration.vignetteEnabled=!0,this.scene.imageProcessingConfiguration.vignetteCameraFov=.6,this.scene.imageProcessingConfiguration.vignetteWeight=2.5,this.scene.ambientColor=d.Color3.FromHexString("#000000"),this.scene.clearColor=d.Color4.FromHexString("#890000ff"),this.scene.imageProcessingConfiguration.contrast=1.3,this.scene.imageProcessingConfiguration.exposure=1.6,this.scene.imageProcessingConfiguration.toneMappingEnabled=!0,this.scene.gravity=new d.Vector3(0,-.9,0),this.scene.collisionsEnabled=!0,this.scene.getMeshByName("BackgroundPlane").checkCollisions=!0;let s=new d.HemisphericLight("light",new d.Vector3(0,1,0),this.scene);s.intensity=.7,new p(this.scene,e),this.loadAssets(),window.addEventListener("resize",()=>this.engine.resize())}}var C=s(1963),w=s.n(C);class v extends c.Component{componentDidMount(){let e=this.canvasRef.current;e?(console.info("\uD83D\uDC77 Canvas attached"),this.createGame(e)):console.error("Canvas element null")}createGame(e){return this.game=new f(e,this.props.assetBaseUrl),this.game}render(){return(0,o.jsx)("canvas",{className:w().renderCanvas,ref:this.canvasRef})}constructor(e){super(e),this.game=null,this.canvasRef=c.createRef(),this.state={hasWon:!1}}}var M=()=>(0,o.jsxs)(c.Fragment,{children:[(0,o.jsxs)(a(),{children:[(0,o.jsx)("title",{children:"Matthew Parkin's Portfolio"}),(0,o.jsx)("meta",{name:"description",content:"My portfolio using next JS"}),(0,o.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,o.jsx)("div",{className:h().container,children:(0,o.jsx)(v,{assetBaseUrl:"/"})})]})},1963:function(e){e.exports={renderCanvas:"GamePage_renderCanvas__XZ2EB"}},4409:function(e){e.exports={container:"index_container__Wxv5N"}},9008:function(e,n,s){e.exports=s(2636)}},function(e){e.O(0,[68,946,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);